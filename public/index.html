<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <!-- CDN BOOTSTRAP CSS =  https://getbootstrap.com/docs/5.3/forms/select/ -->
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">  
    <link rel="stylesheet" href="assets/css/style.css">    
    <title>FULL DOWNLOADS 8K</title>

</head>

<body class="container-fluid container-css" >
    <div id="header"></div>
    
    <header class="mb-5 border-bottom pb-2">
        
        <div class="container text-center mt-3">
            
            <div class="row align-items-center ">
                <div class="col d-flex flex-row-reverse" >
                    <div>
                        <label class="d-flex gap-3" for="modeDark">
                            <span class="btn btn-secondary" id="write-bg">Dark Mode</span>
                            <input class="" type="checkbox" name="modeDark" id="modeDark">

                        </label>
                    </div>
                </div>
            </div>
        
        </div>
    </header>
    
    <!-- Conteudo  -->
    <section class="container w-auto vh-100">

        <section>
            <h1 class="text-center">
                Download Full-HD 8K
            </h1>
        </section>
    
        <!-- Conteudo Principal -->
        <div id="url-get"> </div>
       
    </section>
    
    <!-- Footer -->
    <div id="footer"></div>
    
    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
    
    
    <script src="/socket.io/socket.io.js"></script>
    
    
    <script>
        function print( ob){
            console.log(                
            `
            ======================================
            ${ob}
            ======================================            
            `           
            )
        }
        
        let idClient;

        if(!idClient){
            idClient = Math.random().toString(36).substr(2, 9)
        }
        
        const socket = io();        
        
        //enviando o id random e o socket para o server
        socket.on('connect', ( data )=>{     
            const { id } = socket  
            socket.emit('socketID', {randomID: idClient, socketID: id})
        })      
        
        socket.on('hello', ( data )=>{    
        console.log(data)    

        const status_dl = document.getElementById('bites-count')
        const progress = document.getElementById('bar-progress')
        status_dl.innerHTML= `${data.atual} / ${data.total}`
        progress.style.width = data.porcent
    })

      socket.on('done', (data) => {
         const progress = document.getElementById('bar-progress')
         progress.innerHTML = "Download Completo"
         document.getElementById("write_download").style.display='block'
         document.getElementById("loading").style.display = 'none'
         document.getElementById("load_write").style.display='none'
         document.getElementById("dl_active").removeAttribute('disabled')

        })

    </script>
   
   
    <!-- CDN VUE =  https://br.vuejs.org/v2/guide/installation.html -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
   
    </script><!-- CDN BOOTSTRAP JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- WebSocket io-->
    <script type="module" src="./assets/scripts/scripts.js"></script> 

    </body>

</html>